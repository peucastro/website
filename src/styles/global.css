@import "tailwindcss";
@import "@fontsource/ibm-plex-mono";
@import "@fontsource-variable/ibm-plex-sans";

@plugin "@tailwindcss/typography";

@custom-variant light (&:where(.light, .light *));

@theme {
  /* Fonts */
  --font-sans: "IBM Plex Sans Variable", ui-sans-serif, system-ui;
  --font-mono: "IBM Plex Mono", ui-monospace, monospace;

  /* Dark theme colors (default) */
  /* Backgrounds */
  --color-bg: #282828;
  --color-bg-deep: #1d2021;
  --color-bg-soft: #32302f;

  /* Surfaces */
  --color-surface: #3c3836;
  --color-surface-soft: #45403d;
  --color-border: #504945;

  /* Text */
  --color-fg: #ebdbb2;
  --color-fg-strong: #fbf1c7;
  --color-fg-muted: #a89984;
  --color-muted: #928374;

  /* Accents */
  --color-primary: #fe8019;
  --color-secondary: #fabd2f;
  --color-accent: #fabd2f;

  /* States */
  --color-success: #b8bb26;
  --color-warning: #fabd2f;
  --color-danger: #fb4934;
  --color-info: #83a598;
}

/* Override variables for Light Mode */
@layer theme {
  :root {
    @variant light {
      /* Light theme overrides */
      --color-bg: #fbf1c7;
      --color-bg-deep: #f9f5d7;
      --color-bg-soft: #f2e5bc;

      --color-surface: #ebdbb2;
      --color-surface-soft: #d5c4a1;
      --color-border: #bdae93;

      --color-fg: #3c3836;
      --color-fg-strong: #282828;
      --color-fg-muted: #665c54;
      --color-muted: #7c6f64;

      --color-primary: #d65d0e;
      --color-secondary: #d79921;
      --color-accent: #d79921;

      --color-success: #98971a;
      --color-warning: #d79921;
      --color-danger: #cc241d;
      --color-info: #458588;
    }
  }
}

@layer base {
  *,
  ::after,
  ::before {
    border-color: var(--color-border);
  }

  html {
    background-color: var(--color-bg);
    color: var(--color-fg);
    scroll-behavior: smooth;
    transition:
      background-color 0.3s ease,
      color 0.3s ease,
      border-color 0.3s ease;
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
      transition: none;
    }
    *,
    ::before,
    ::after {
      animation-duration: 0.01ms;
      animation-iteration-count: 1;
      transition-duration: 0.01ms;
      scroll-behavior: auto;
    }
  }

  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: var(--font-sans);
  }
}

@layer utilities {
  .form-input {
    @apply bg-bg-soft border-border text-fg w-full border px-4 py-2 font-sans transition-colors;
    @apply focus:border-primary placeholder:text-muted/50 focus:outline-none;
  }

  .form-label {
    @apply text-muted mb-2 block font-mono text-xs tracking-widest uppercase;
  }

  .prose {
    --tw-prose-body: var(--color-fg);
    --tw-prose-headings: var(--color-fg-strong);
    --tw-prose-links: var(--color-primary);
    --tw-prose-bold: var(--color-fg-strong);
    --tw-prose-counters: var(--color-muted);
    --tw-prose-bullets: var(--color-surface-soft);
    --tw-prose-quotes: var(--color-fg-muted);
    --tw-prose-quote-borders: var(--color-primary);
    --tw-prose-captions: var(--color-muted);
    --tw-prose-code: var(--color-secondary);
    --tw-prose-pre-code: var(--color-fg);
    --tw-prose-pre-bg: var(--color-bg-deep);
    --tw-prose-th-borders: var(--color-border);
    --tw-prose-td-borders: var(--color-border);
  }

  .prose pre {
    background-color: var(--color-bg-deep) !important;
  }

  .prose pre,
  .prose pre code,
  .prose code {
    font-family: var(--font-mono);
  }

  .prose pre {
    padding: 1.5rem;
    margin: 2rem 0;
  }

  .prose pre code {
    font-size: 0.875rem;
    line-height: 1.7;
  }
}
